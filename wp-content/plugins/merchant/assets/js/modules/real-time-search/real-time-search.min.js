var merchant=merchant||{};merchant.modules=merchant.modules||{},(n=>{merchant.modules.ajaxRealTimeSearch={init:function(){var r=this,a=document.querySelectorAll(".woocommerce-product-search .wc-search-field, .widget_product_search .search-field, .wp-block-search .wp-block-search__input, .wc-block-product-search-field, .woocommerce-product-search .search-field, .w-search-form input");if(a.length){for(var e=0;e<a.length;e++)(e=>{a[e].setAttribute("autocomplete","off"),a[e].addEventListener("keyup",r.debounce(function(){r.searchFormHandler(a[e])},300)),a[e].addEventListener("focus",r.debounce(function(){r.searchFormHandler(a[e])},300))})(e);document.addEventListener("click",function(e){null===e.target.closest(".merchant-ajax-search-wrapper")&&r.destroy()})}},searchFormHandler:function(a){if(a.value.length<3)return!1;var t=this,e=a.value,r=a.classList,r=r.contains("wc-block-product-search-field")||r.contains("wc-search-field")?"product":"post";n.post(window.merchant.setting.ajax_url,{action:"ajax_search_callback",nonce:window.merchant.setting.nonce,type:r,search_term:e,posts_per_page:window.merchant.setting.ajax_search_results_amounth_per_search,orderby:window.merchant.setting.ajax_search_results_order_by,order:window.merchant.setting.ajax_search_results_order,display_categories:window.merchant.setting.ajax_search_results_display_categories,enable_search_by_sku:window.merchant.setting.ajax_search_results_enable_search_by_sku},function(e){var r=a.parentNode.getElementsByClassName("merchant-ajax-search-wrapper")[0],e=(void 0===r&&((r=document.createElement("div")).className="merchant-ajax-search-wrapper",a.parentNode.append(r),a.parentNode.classList.add("merchant-ajax-search")),r.innerHTML=e.output,document.querySelector(".merchant-ajax-search-products"));null!==e&&t.scrollbarVisible(e)&&e.classList.add("has-scrollbar"),t.elementIsOutOfScreenHorizontal(r)&&r.classList.add("merchant-reverse")})},destroy:function(){if(!n("body").hasClass("wp-admin")){var e=document.querySelectorAll(".merchant-ajax-search-wrapper");if(e.length)for(var r=0;r<e.length;r++)e[r].remove()}},debounce:function(t,n){var c=null;return function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];window.clearTimeout(c),c=window.setTimeout(function(){t.apply(null,r)},n)}},scrollbarVisible:function(e){return e.scrollHeight>e.clientHeight},elementIsOutOfScreenHorizontal:function(e){e=e.getBoundingClientRect();return e.x+e.width>window.innerWidth}},n(document).ready(function(){merchant.modules.ajaxRealTimeSearch.init()})})(jQuery);