"use strict";var merchant=merchant||{};merchant.modules=merchant.modules||{},function(l){merchant.modules.ajaxRealTimeSearch={init:function(){var r=this,a=document.querySelectorAll('.woocommerce-product-search .wc-search-field, .widget_product_search .search-field, .wp-block-search .wp-block-search__input, .wc-block-product-search-field, .woocommerce-product-search .search-field, .w-search-form input, .the7-search-form__input, input[type="search"]');if(a.length){for(var e=0;e<a.length;e++)!function(e){a[e].setAttribute("autocomplete","off"),a[e].addEventListener("keyup",r.debounce(function(){r.searchFormHandler(a[e])},300)),a[e].addEventListener("focus",r.debounce(function(){r.searchFormHandler(a[e])},300))}(e);document.addEventListener("click",function(e){null===e.target.closest(".merchant-ajax-search-wrapper")&&r.destroy()})}},searchFormHandler:function(a){if(a.value.length<3)return!1;var t=this,e=a.value,r=a.classList,r=r.contains("wc-block-product-search-field")||r.contains("wc-search-field")?"product":"post",c=window.merchant.setting.real_time_search||{},n=c.ajax_search_results_amount_per_search,o=c.ajax_search_results_order_by,s=c.ajax_search_results_order,i=c.ajax_search_results_display_categories,c=c.ajax_search_results_enable_search_by_sku;l.ajax({url:window.merchant.setting.ajax_url,method:"POST",data:{action:"ajax_search_callback",nonce:window.merchant.setting.nonce,type:r,search_term:e,posts_per_page:void 0===n?15:n,orderby:void 0===o?"title":o,order:void 0===s?"asc":s,display_categories:void 0===i?0:i,enable_search_by_sku:void 0===c?0:c},success:function(e){var r=a.parentNode.querySelector(".merchant-ajax-search-wrapper"),e=(r||((r=document.createElement("div")).className="merchant-ajax-search-wrapper",a.parentNode.append(r),a.parentNode.classList.add("merchant-ajax-search")),r.innerHTML=e.output,document.querySelector(".merchant-ajax-search-products"));e&&t.scrollbarVisible(e)&&e.classList.add("has-scrollbar"),t.elementIsOutOfScreenHorizontal(r)&&r.classList.add("merchant-reverse")}})},destroy:function(){document.body.classList.contains("wp-admin")||document.querySelectorAll(".merchant-ajax-search-wrapper").forEach(function(e){return e.remove()})},debounce:function(t,c){var n=null;return function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];window.clearTimeout(n),n=window.setTimeout(function(){t.apply(null,r)},c)}},scrollbarVisible:function(e){return e.scrollHeight>e.clientHeight},elementIsOutOfScreenHorizontal:function(e){e=e.getBoundingClientRect();return e.x+e.width>window.innerWidth}},l(document).ready(function(){merchant.modules.ajaxRealTimeSearch.init()})}(jQuery);