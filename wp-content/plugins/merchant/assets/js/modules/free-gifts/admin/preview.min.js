((o,r)=>{var e=merchant||{},s=e.spending_texts,f=e.gifts_icons;function t(){var e,t,n=o(".merchant-flexible-content-control.free-gifts-style").find(".layout.active"),i=n.find(".merchant-field-rules_to_apply select").val(),a=n.find(".merchant-field-spending_text_0 input").val(),c=n.find(".merchant-field-amount input").val(),l="Any";"product"===i?l=(l=n.find(".merchant-field-product_to_purchase .product-item").attr("data-name"))||"Specific product":"categories"===i?(e=[],n.find(".merchant-field-category_slugs .select2-selection__choice").each(function(){e.push(o(this).attr("title"))}),l=e.length?e.join(", "):"Categories"):"tags"===i&&(t=[],n.find(".merchant-field-tag_slugs .select2-selection__choice").each(function(){t.push(o(this).attr("title"))}),l=t.length?t.join(", "):"Tags"),a=null==(n=null==(i=a)?void 0:i.replace(/{amount}|{goalAmount}/g,c))?void 0:n.replace(/{productName}|{categories}|{tags}/g,l),o(".merchant-free-gifts-widget-offer-label").html(a),o(r).on("change",".merchant-field-rules_to_apply select",function(){var e=o(this).val();if(e){var t,n,i=o(this).closest(".layout"),a=s[e]||{};for(t in a)a.hasOwnProperty(t)&&(n=i.find('input[name*="'.concat(t,'"]'))).length&&n.val(a[t])}}),o(r).on("change",".merchant-choices-icon input",function(){var e=o(this).val();e&&o(this).closest("label").find("img").attr("src")&&o(".merchant-module-page-preview-box").find(".merchant-free-gifts-widget-icon").html(f[e])}),o(r).on("change",".merchant-field-position select",function(){var e=o(this).val();e&&(o(".merchant-field-position select option").each(function(){o(".merchant-free-gifts-widget").removeClass("merchant-free-gifts-widget--"+o(this).val())}),o(".merchant-free-gifts-widget").addClass("merchant-free-gifts-widget--"+e),e="bottom_left"===e||"bottom_right"===e?100:150,o(".merchant-field-distance input").val(e),o(".merchant-free-gifts-widget").css("--merchant-free-gifts-distance",e+"px"))})}o(r).on("ready",function(){o(".merchant-flexible-content-control.free-gifts-style .merchant-flexible-content .layout:first").addClass("active"),t()}),o(r).on("click",".merchant-flexible-content-control.free-gifts-style .layout",function(){var e=o(this);e.closest(".merchant-flexible-content-control.free-gifts-style").find(".layout").removeClass("active"),e.addClass("active"),t()}),o(r).on("change.merchant keyup input",function(){t()})})(jQuery,(window,document));