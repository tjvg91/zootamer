"use strict";!function(o,l){var e=merchant||{},r=e.spending_texts,s=e.gifts_icons;function t(){var e,t=o(".merchant-flexible-content-control.free-gifts-style").find(".layout.active"),n=t.find(".merchant-field-rules_to_apply select").val(),i=t.find(".merchant-field-spending_text_0 input").val(),c=t.find(".merchant-field-amount input").val(),a="Any";"product"===n?a=(a=t.find(".merchant-field-product_to_purchase .product-item").attr("data-name"))||"Specific product":"categories"===n&&(e=[],t.find(".merchant-field-category_slugs .select2-selection__choice").each(function(){e.push(o(this).attr("title"))}),a=e.length?e.join(", "):"Categories"),i=null==(t=null==(n=i)?void 0:n.replace(/{amount}|{goalAmount}/g,c))?void 0:t.replace(/{productName}|{categories}/g,a),o(".merchant-free-gifts-widget-offer-label").html(i),o(l).on("change",".merchant-field-rules_to_apply select",function(){var e=o(this).val();if(e){var t,n,i=o(this).closest(".layout"),c=r[e]||{};for(t in c)c.hasOwnProperty(t)&&(n=i.find('input[name*="'.concat(t,'"]'))).length&&n.val(c[t])}}),o(l).on("change",".merchant-choices-icon input",function(){var e=o(this).val();e&&o(this).closest("label").find("img").attr("src")&&o(".merchant-module-page-preview-box").find(".merchant-free-gifts-widget-icon").html(s[e])}),o(l).on("change",".merchant-field-position select",function(){var e=o(this).val();e&&(o(".merchant-field-position select option").each(function(){o(".merchant-free-gifts-widget").removeClass("merchant-free-gifts-widget--"+o(this).val())}),o(".merchant-free-gifts-widget").addClass("merchant-free-gifts-widget--"+e),e="bottom_left"===e||"bottom_right"===e?100:150,o(".merchant-field-distance input").val(e),o(".merchant-free-gifts-widget").css("--merchant-free-gifts-distance",e+"px"))})}o(l).on("ready",function(){o(".merchant-flexible-content-control.free-gifts-style .merchant-flexible-content .layout:first").addClass("active"),t()}),o(l).on("click",".merchant-flexible-content-control.free-gifts-style .layout",function(){var e=o(this);e.closest(".merchant-flexible-content-control.free-gifts-style").find(".layout").removeClass("active"),e.addClass("active"),t()}),o(l).on("change.merchant keyup input",function(){t()})}(jQuery,(window,document));