(l=>{var d=(merchant||{}).icons,n=".merchant-flexible-content-control.reasons-to-buy-style";function a(){var c=l(n).find(".layout.active"),i=l(".merchant-reasons-list-preview").find(".merchant-reasons-list"),e=c.find(".merchant-field-title input").val(),t=c.find(".merchant-field-title_color input").val(),e=(i.find(".merchant-reasons-list-title").text(e).css({color:t}),[]);try{e=JSON.parse(c.find(".merchant-sortable-repeater-input").val())}catch(t){e=[]}var o=c.find(".merchant-field-items_color input").val(),r=c.find(".merchant-field-icon_color input").val(),s=c.find(".merchant-field-spacing input").val();i.find(".merchant-reasons-list-item").remove(),e.forEach(function(t,e){var n,e=l('<div class="merchant-reasons-list-item" data-index="'.concat(e,'" style="margin-top: ').concat(s,'px"></div>')),t='<p class="merchant-reasons-list-item-text" style="color: '.concat(o,'">').concat(t,"</p>"),a="";c.find(".merchant-field-display_icon input").is(":checked")&&(n=c.find(".merchant-field-icon .merchant-choices-icon input:checked").val())&&(a='<div class="merchant-reasons-list-item-icon" style="color: '.concat(r,'">').concat(d[n]||"","</div>")),e.append(a).append(t),i.append(e)}),c.find(".merchant-sortable-repeater .repeater").each(function(t){l(this).attr("data-index",t)})}l(document).on("ready",function(){l("".concat(n," .merchant-flexible-content .layout:first")).addClass("active"),a()}),l(document).on("click","".concat(n," .merchant-flexible-content .layout"),function(){var t=l(this);t.closest(n).find(".layout").removeClass("active"),t.addClass("active"),a()}),l(document).on("merchant-flexible-content-added",function(t,e){l(n).find(".layout").removeClass("active"),e.addClass("active"),a()}),l(document).on("sortable.repeater.change",function(t){a()}),l(document).on("change.merchant keyup",function(t){l(t.target).hasClass("repeater-input")||a()}),l(document).on("input",".repeater-input",function(){var t=l(this).closest(".repeater").attr("data-index"),t=l(".merchant-reasons-list-item[data-index=".concat(t,"]")).find(".merchant-reasons-list-item-text");t.length&&t.text(l(this).val())})})(jQuery);