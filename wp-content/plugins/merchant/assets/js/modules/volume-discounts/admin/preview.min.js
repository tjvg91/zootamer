"use strict";!function(w){function e(){var t=w(".merchant-flexible-content-control.volume-discounts-style").find(".layout.active"),e=t.find(".merchant-field-table_title input").val(),c=t.find(".merchant-field-title_text_color input").val(),n=t.find(".merchant-field-title_font_size input").val(),a=t.find(".merchant-field-title_font_weight select").val(),i=t.find(".merchant-field-table_item_bg_color input").val(),o=t.find(".merchant-field-table_item_border_color input").val(),r=t.find(".merchant-field-table_item_text_color input").val(),l=t.find(".merchant-field-table_label_bg_color input").val(),u=t.find(".merchant-field-table_label_text_color input").val(),d=t.find(".merchant-field-discount_type input:checked").val(),s=+t.find(".merchant-field-discount input").val(),p=t.find(".merchant-field-discount input"),h=t.find(".merchant-field-save_label input").val(),m=t.find(".merchant-field-buy_text input").val(),f=+t.find(".merchant-field-quantity input").val(),v=t.find(".merchant-group-field-cart_page .merchant-field-title input").val(),_=t.find(".merchant-group-field-checkout_page .merchant-field-title input").val(),g=t.find(".merchant-group-field-checkout_page .merchant-field-discount_text input").val(),y=t.find(".merchant-group-field-checkout_page .merchant-field-button_text input").val(),b=t.find(".merchant-group-field-thank_you_page .merchant-field-title input").val(),x=t.find(".merchant-group-field-thank_you_page .merchant-field-discount_text input").val(),k=t.find(".merchant-group-field-thank_you_page .merchant-field-button_text input").val(),t=t.find(".merchant-group-field-cart_page .merchant-field-button_text input").val(),c=(w(".merchant-volume-discounts-title").css({color:c,"font-size":n+"px","font-weight":a}).html(e),w(".merchant-volume-discounts-item").css({"border-color":o,"background-color":i,color:r}),w(".merchant-volume-discounts-item-label")),n=w(".merchant-volume-discounts-buy-label"),a=(c.find("span:first").css({"background-color":l,color:u}),c.closest(".mrc-preview-right-column").attr("data-currency")),e="fixed_discount"===d?"".concat(a).concat(s):"".concat(s,"%"),o="fixed_discount"===d?"".concat(a).concat(s*f):"".concat(s,"%"),h=h.replace(/{amount}|{percent}/g,o);c.find("span:first").text(h),m=m.replace(/{discount}|{percent}/g,"<strong>".concat(e,"</strong>")).replace(/{quantity}|{amount}/g,"<strong>".concat(f,"</strong>")),n.html(m),w(".merchant-cart-preview .my-cart .cart-table .cart-item .product .product-info .upsell-offer").text(v.replace("{quantity}","3").replace("{discount}","20%")),w(".merchant-cart-preview .my-cart .cart-table .cart-item .product .product-info .upsell-product .upsell-info .add-to-cart").text(t),w(".merchant-checkout-preview .offer-title").text(_.replace("{quantity}","3").replace("{discount}","10%")),w(".merchant-checkout-preview .product-details .product-info p").html(g.replace("{discount}","10%").replace("{product_price}",merchant_volume_discounts.mock_item_price)),w(".merchant-checkout-preview .product-details .product-info .add-to-order").text(y),w(".merchant-thank-you-preview .offer-title").text(b.replace("{quantity}","3").replace("{discount}","15%").replace("{total_quantity}","5")),w(".merchant-thank-you-preview .product-details .product-info p").html(x.replace("{product_price}",merchant_volume_discounts.mock_item_price).replace("{discount}","10%")),w(".merchant-thank-you-preview .product-details .product-info .add-to-order").text(k),"percentage_discount"===d?(p.attr("max",100),100<p.val()&&p.val(100)):p.removeAttr("max")}function c(){w(".merchant-single-product-preview").addClass("show")}function n(){w(".merchant-single-product-preview").removeClass("show")}function a(){w(".merchant-cart-preview").removeClass("show")}function i(){w(".merchant-thank-you-preview").removeClass("show")}function o(){w(".merchant-checkout-preview").removeClass("show")}w(document).on("click",".merchant-flexible-content-control.volume-discounts-style .layout",function(){var t=w(this);t.closest(".merchant-flexible-content-control.volume-discounts-style").find(".layout").removeClass("active"),t.addClass("active"),e()}),w(document).on("change.merchant keyup",function(){e()}),w(".merchant-flexible-content-control.volume-discounts-style .layout:first-child").addClass("active").trigger("click"),w(document).on("change",'input[type="radio"]',function(){var c=w(this).val();"percentage_discount"!==c&&"fixed_discount"!==c||w(this).closest(".layout").find('input[type="text"], textarea').each(function(){var t="percentage_discount"===c?"{percent}":"{amount}",e=w(this).val(),e=(w(this).attr("name").includes("buy_text")&&(t="{quantity}"),e.replace(/{amount}|{percent}/g,t));w(this).val(e)})}),w(".merchant-module-page-setting-box").on("click",function(t){t=w(t.target);(0<t.closest(".merchant-group-field-cart_page").length||t.hasClass("merchant-group-field-cart_page")?(w(".merchant-cart-preview").addClass("show"),n(),i(),o):0<t.closest(".merchant-group-field-thank_you_page").length||t.hasClass("merchant-group-field-thank_you_page")?(w(".merchant-thank-you-preview").addClass("show"),n(),a(),o):0<t.closest(".merchant-group-field-checkout_page").length||t.hasClass("merchant-group-field-checkout_page")?(w(".merchant-checkout-preview").addClass("show"),n(),a(),i):(c(),a(),i(),o))()}),c()}(jQuery);