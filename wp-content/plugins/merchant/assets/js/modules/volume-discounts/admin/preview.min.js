(z=>{function e(){var t=z(".merchant-flexible-content-control.volume-discounts-style").find(".layout.active"),e=t.find(".merchant-field-table_title input").val(),c=t.find(".merchant-field-title_text_color input").val(),n=t.find(".merchant-field-title_font_size input").val(),a=t.find(".merchant-field-title_font_weight select").val(),r=t.find(".merchant-field-table_item_bg_color input").val(),i=t.find(".merchant-field-table_item_bg_color_hover input").val(),o=t.find(".merchant-field-table_item_border_color input").val(),l=t.find(".merchant-field-table_item_border_color_hover input").val(),u=t.find(".merchant-field-table_item_text_color input").val(),d=t.find(".merchant-field-table_item_text_color_hover input").val(),h=t.find(".merchant-field-table_label_bg_color input").val(),m=t.find(".merchant-field-table_label_text_color input").val(),p=t.find(".merchant-field-discount_type input:checked").val(),s=+t.find(".merchant-field-discount input").val(),f=t.find(".merchant-field-discount input"),_=t.find(".merchant-field-save_label input").val(),v=t.find(".merchant-field-buy_text input").val(),g=+t.find(".merchant-field-quantity input").val(),b=t.find(".merchant-group-field-cart_page .merchant-field-title input").val(),y=t.find(".merchant-group-field-checkout_page .merchant-field-title input").val(),x=t.find(".merchant-group-field-checkout_page .merchant-field-discount_text input").val(),k=t.find(".merchant-group-field-checkout_page .merchant-field-button_text input").val(),w=t.find(".merchant-group-field-thank_you_page .merchant-field-title input").val(),C=t.find(".merchant-group-field-thank_you_page .merchant-field-discount_text input").val(),q=t.find(".merchant-group-field-thank_you_page .merchant-field-button_text input").val(),t=t.find(".merchant-group-field-cart_page .merchant-field-button_text input").val(),c=(z(".merchant-volume-discounts-title").css({color:c,"font-size":n+"px","font-weight":a}).html(e),z(".merchant-volume-discounts-item").css({"--merchant-item-text-color":u,"--merchant-item-text-color-hover":d||u,"--merchant-item-bg-color":r,"--merchant-item-bg-color-hover":i||r,"--merchant-item-border-color":o,"--merchant-item-border-color-hover":l||o}),z(".merchant-volume-discounts-item-label")),n=z(".merchant-volume-discounts-buy-label"),a=(c.find("span:first").css({"--merchant-label-text-color":m,"--merchant-label-bg-color":h}),c.closest(".mrc-preview-right-column").attr("data-currency")),e="fixed_discount"===p?"".concat(a).concat(s):"".concat(s,"%"),d="fixed_discount"===p?"".concat(a).concat(s*g):"".concat(s,"%"),_=_.replace(/{amount}|{percent}/g,d);c.find("span:first").text(_),v=v.replace(/{discount}|{percent}/g,"<strong>".concat(e,"</strong>")).replace(/{quantity}|{amount}/g,"<strong>".concat(g,"</strong>")),n.html(v),z(".merchant-cart-preview .my-cart .cart-table .cart-item .product .product-info .upsell-offer").text(b.replace("{quantity}","3").replace("{discount}","20%")),z(".merchant-cart-preview .my-cart .cart-table .cart-item .product .product-info .upsell-product .upsell-info .add-to-cart").text(t),z(".merchant-checkout-preview .offer-title").text(y.replace("{quantity}","3").replace("{discount}","10%")),z(".merchant-checkout-preview .product-details .product-info p").html(x.replace("{discount}","10%").replace("{product_price}",merchant_volume_discounts.mock_item_price)),z(".merchant-checkout-preview .product-details .product-info .add-to-order").text(k),z(".merchant-thank-you-preview .offer-title").text(w.replace("{quantity}","3").replace("{discount}","15%").replace("{total_quantity}","5")),z(".merchant-thank-you-preview .product-details .product-info p").html(C.replace("{product_price}",merchant_volume_discounts.mock_item_price).replace("{discount}","10%")),z(".merchant-thank-you-preview .product-details .product-info .add-to-order").text(q),"percentage_discount"===p?(f.attr("max",100),100<f.val()&&f.val(100)):f.removeAttr("max")}function c(){z(".merchant-single-product-preview").addClass("show")}function n(){z(".merchant-single-product-preview").removeClass("show")}function a(){z(".merchant-cart-preview").removeClass("show")}function r(){z(".merchant-thank-you-preview").removeClass("show")}function i(){z(".merchant-checkout-preview").removeClass("show")}z(document).on("click",".merchant-flexible-content-control.volume-discounts-style .layout",function(){var t=z(this);t.closest(".merchant-flexible-content-control.volume-discounts-style").find(".layout").removeClass("active"),t.addClass("active"),e()}),z(document).on("change.merchant keyup",function(){e()}),z(".merchant-flexible-content-control.volume-discounts-style .layout:first-child").addClass("active").trigger("click"),z(document).on("change",'input[type="radio"]',function(){var c=z(this).val();"percentage_discount"!==c&&"fixed_discount"!==c||z(this).closest(".layout").find('input[type="text"], textarea').each(function(){var t="percentage_discount"===c?"{percent}":"{amount}",e=z(this).val(),e=(z(this).attr("name").includes("buy_text")&&(t="{quantity}"),e.replace(/{amount}|{percent}/g,t));z(this).val(e)})}),z(".merchant-module-page-setting-box").on("click",function(t){t=z(t.target);(0<t.closest(".merchant-group-field-cart_page").length||t.hasClass("merchant-group-field-cart_page")?(z(".merchant-cart-preview").addClass("show"),n(),r(),i):0<t.closest(".merchant-group-field-thank_you_page").length||t.hasClass("merchant-group-field-thank_you_page")?(z(".merchant-thank-you-preview").addClass("show"),n(),a(),i):0<t.closest(".merchant-group-field-checkout_page").length||t.hasClass("merchant-group-field-checkout_page")?(z(".merchant-checkout-preview").addClass("show"),n(),a(),r):(c(),a(),r(),i))()}),c()})(jQuery);