(x=>{function e(){var t=x(".merchant-flexible-content-control.volume-discounts-style").find(".layout.active"),e=t.find(".merchant-field-table_title input").val(),c=t.find(".merchant-field-title_text_color input").val(),n=t.find(".merchant-field-title_font_size input").val(),a=t.find(".merchant-field-title_font_weight select").val(),i=t.find(".merchant-field-table_item_bg_color input").val(),o=t.find(".merchant-field-table_item_border_color input").val(),r=t.find(".merchant-field-table_item_text_color input").val(),l=t.find(".merchant-field-table_label_bg_color input").val(),u=t.find(".merchant-field-table_label_text_color input").val(),d=t.find(".merchant-field-discount_type input:checked").val(),s=+t.find(".merchant-field-discount input").val(),p=t.find(".merchant-field-save_label input").val(),h=t.find(".merchant-field-buy_text input").val(),m=+t.find(".merchant-field-quantity input").val(),f=t.find(".merchant-group-field-cart_page .merchant-field-title input").val(),v=t.find(".merchant-group-field-checkout_page .merchant-field-title input").val(),_=t.find(".merchant-group-field-checkout_page .merchant-field-discount_text input").val(),g=t.find(".merchant-group-field-checkout_page .merchant-field-button_text input").val(),y=t.find(".merchant-group-field-thank_you_page .merchant-field-title input").val(),b=t.find(".merchant-group-field-thank_you_page .merchant-field-discount_text input").val(),k=t.find(".merchant-group-field-thank_you_page .merchant-field-button_text input").val(),t=t.find(".merchant-group-field-cart_page .merchant-field-button_text input").val(),c=(x(".merchant-volume-discounts-title").css({color:c,"font-size":n+"px","font-weight":a}).html(e),x(".merchant-volume-discounts-item").css({"border-color":o,"background-color":i,color:r}),x(".merchant-volume-discounts-item-label")),n=x(".merchant-volume-discounts-buy-label"),a=(c.find("span:first").css({"background-color":l,color:u}),c.closest(".mrc-preview-right-column").attr("data-currency")),e="fixed_discount"===d?"".concat(a).concat(s):"".concat(s,"%"),o="fixed_discount"===d?"".concat(a).concat(s*m):"".concat(s,"%"),p=p.replace(/{amount}|{percent}/g,o);c.find("span:first").text(p),h=h.replace(/{discount}|{percent}/g,"<strong>".concat(e,"</strong>")).replace(/{quantity}|{amount}/g,"<strong>".concat(m,"</strong>")),n.html(h),x(".merchant-cart-preview .my-cart .cart-table .cart-item .product .product-info .upsell-offer").text(f.replace("{quantity}","3").replace("{discount}","20%")),x(".merchant-cart-preview .my-cart .cart-table .cart-item .product .product-info .upsell-product .upsell-info .add-to-cart").text(t),x(".merchant-checkout-preview .offer-title").text(v.replace("{quantity}","3").replace("{discount}","10%")),x(".merchant-checkout-preview .product-details .product-info p").html(_.replace("{discount}","10%").replace("{product_price}",merchant_volume_discounts.mock_item_price)),x(".merchant-checkout-preview .product-details .product-info .add-to-order").text(g),x(".merchant-thank-you-preview .offer-title").text(y.replace("{quantity}","3").replace("{discount}","15%").replace("{total_quantity}","5")),x(".merchant-thank-you-preview .product-details .product-info p").html(b.replace("{product_price}",merchant_volume_discounts.mock_item_price).replace("{discount}","10%")),x(".merchant-thank-you-preview .product-details .product-info .add-to-order").text(k)}function c(){x(".merchant-single-product-preview").addClass("show")}function n(){x(".merchant-single-product-preview").removeClass("show")}function a(){x(".merchant-cart-preview").removeClass("show")}function i(){x(".merchant-thank-you-preview").removeClass("show")}function o(){x(".merchant-checkout-preview").removeClass("show")}x(document).on("click",".merchant-flexible-content-control.volume-discounts-style .layout",function(){var t=x(this);t.closest(".merchant-flexible-content-control.volume-discounts-style").find(".layout").removeClass("active"),t.addClass("active"),e()}),x(document).on("change.merchant keyup",function(){e()}),x(".merchant-flexible-content-control.volume-discounts-style .layout:first-child").addClass("active").trigger("click"),x(document).on("change",'input[type="radio"]',function(){var c=x(this).val();"percentage_discount"!==c&&"fixed_discount"!==c||x(this).closest(".layout").find('input[type="text"], textarea').each(function(){var t="percentage_discount"===c?"{percent}":"{amount}",e=x(this).val(),e=(x(this).attr("name").includes("buy_text")&&(t="{quantity}"),e.replace(/{amount}|{percent}/g,t));x(this).val(e)})}),x(".merchant-module-page-setting-box").on("click",function(t){t=x(t.target);(0<t.closest(".merchant-group-field-cart_page").length||t.hasClass("merchant-group-field-cart_page")?(x(".merchant-cart-preview").addClass("show"),n(),i(),o):0<t.closest(".merchant-group-field-thank_you_page").length||t.hasClass("merchant-group-field-thank_you_page")?(x(".merchant-thank-you-preview").addClass("show"),n(),a(),o):0<t.closest(".merchant-group-field-checkout_page").length||t.hasClass("merchant-group-field-checkout_page")?(x(".merchant-checkout-preview").addClass("show"),n(),a(),i):(c(),a(),i(),o))()}),c()})(jQuery);